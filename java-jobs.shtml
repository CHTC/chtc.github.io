
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<script type="text/javascript">

  function resizeIframe(iframe) {
    var newheight;
    var newwidth;

    if(document.getElementById){
        newwidth=iframe.contentWindow.document.body.scrollWidth;
        newheight=iframe.contentWindow.document.body.scrollHeight;
    }

    iframe.height= (newheight) + "px";
    iframe.width= (newwidth) + "px";
  }
</script>
<title>Using Java Code in CHTC</title>

<link href="/web.css" rel="stylesheet" type="text/css">
</head>
<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
   <td width="1%" align="left" class="bgred" valign="top">
      <div align="center">
      &nbsp;<br>
      <a href="http://www.wisc.edu">

      <img src="/images/uw-sm-red.png" width="125" height="46" border="0"> </a>
       </div>

	<ul class="sidebar">
	<li><a href="/">CHTC Home</a></li>
	
	<li>About
		<ul>
		<li><a href="/approach.shtml">Our Approach</a></li>
<!--comment		<li><a href="/resources.shtml">Our Resources</a></li>   -->
		<li><a href="/projects.shtml">Our Customers</a></li>
		<li><a href="/people.shtml">Our Staff</a></li>
		<li><a href="/jobs.shtml">Our Open Positions</a></li>
		</ul>
	</li>
	
	<li>How To's
		<ul>
		<li><a href="/get-started.shtml">Get Started</a></li>
		<li><a href="/get-help.shtml">Get Help</a></li>
        	<li><a href="/guides.shtml">All User Guides</a></li>
                <li><a href="/use-submit-node.shtml">Use an HTC Submit Server</a></li>
		<li><a href="/helloworld.shtml">Run Your First HTC Jobs</a></li>
		<li><a href="/howto_overview.shtml">HTC for MatLab, Python or R</a></li>
		<li><a href="/HPCuseguide.shtml">Use the HPC Cluster</a></li>
		<li><a href="/cite-chtc.shtml">Cite CHTC Resources</a></li>
		</ul>
	</li>
	<li><a href="/user-news.shtml">User News</a></li>
	<li>Other Resources
		<ul>
		<!--<li><a href="http://monitor.chtc.wisc.edu/uw_condor_usage/usage1.shtml">Pool Usage Reports</a></li>-->
<!--comment		<li><a href="/opmetrics.shtml">Operational Metrics</a></li>  -->
		<li><a href="http://research.cs.wisc.edu/htcondor/">HTCondor Project</a></li>
		<li><a href="http://www.neos-server.org/">NEOS Optimization Service</a></li>
		<li><a href="http://www.opensciencegrid.org/">Open Science Grid</a></li>
		<li><a href="http://wid.wisc.edu/">WID (Wisconsin Institute for Discovery)</a></li>
		</ul>
	</li>
	</ul>

	</td>

<td width="97%" valign="top"> 


	<TABLE SUMMARY="Navigation layout" BORDER="0" WIDTH="100%" CELLSPACING="0" CELLPADDING="0">
<TR ALIGN="left"> 
  <TD WIDTH="100%" height="400" Align="left" VALIGN="top"> 
    <A  name="body"></a> 
	<div id = "main">

<!-- Top of Page Body -->
<table BORDER="0" WIDTH="100%">
<!-- <h1 align=left valign=center>The Center for High Throughput Computing</h1> -->

	

<div id="osg_power"> <span style="height: 20px">Powered by:</span><br /><a href="http://opensciencegrid.org"><img alt="Open Science Grid" src="/images/Open_Science_Grid_Consortium(Logo).jpg" width="123" height="70" /></a></div>

	

<div id="hours"> <span style="height: 20px">
	<center><b>Follow us on social media:</b><a href="https://twitter.com/CHTC_UW"><img alt="Twitter" src="/images/twitter.png" width="70" height="70"></center></a></span></div>
	
	
<div id="hours"> <span style="height: 20px">
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<a href="http://chtc.cs.wisc.edu/get-help.shtml" style="color:white;">
<b>Office Hours!</b>
<br>
Tues/Thurs, 3-4:30pm<br>
Wed, 9:30-11:30am</br>
Click for details
</a></span></div>	


	


<div style="margin-top:1em;"><a href="http://chtc.cs.wisc.edu/"><img alt="Center for High Throughput Computing" src="/images/CHTC-logo.png" width="500" height="90"></a></div>

<h1>Using Java Code in CHTC</h1>


<h1>Overview</h1>

<p>If your code uses Java via a <code>.jar</code> file, it is easy to run 
on CHTC and beyond.  There are two ways to run Java code from a CHTC 
submit server: 
<ul>
	<li><a href="#default">Run jobs in CHTC only, using the default Java version (1.8)</a></li>
	<li><a href="#portable">Use a newer version of Java and/or run jobs beyond 
	CHTC (on the UW Grid or Open Science Grid) (recommended)</a></li>
</ul>

<p>You should only use *one* of these options to run Java code, not both.</p>

<a name="default"></a>
<h1>Pre-installed Java</h1>

<p>To run in CHTC only, using the default version of java (1.8): </p>

<ol>
<li>Add this line to your submit file:
  <pre class="sub">requirements = (Target.HasJava == true) </pre> </li>
<li>Your executable should be a wrapper script that executes your program. 

<pre class="file">
#!/bin/bash

java -jar <i>program.jar</i>
</pre>
</li>

</ol>

<a name="portable"></a>
<h1>Portable Java</h1>

<p>To use a newer version of Java and/or to run outside of CHTC on the UW Grid 
and/or Open Science Grid: </p>

<ol>
<li>Download the Linux x64 Java/JDK tar file (the .tar.gz ending *not* .rpm) from the 
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle website</a>. 
You'll need to click on a button to "Accept License Agreement" to download. 
<li> Add the downloaded tar file to the <code>transfer_input_files</code> line of your 
submit file: 
 <pre class="sub">transfer_input_files = <i>jdk-8u121-linux-x64.tar.gz</i></pre></li>
<li>Write a script that unpacks the jdk tar file, sets the environment to find 
the java software, and then runs your program.  This script will be your job's 
executable.  See this example for what the script should look like: 
<pre class="file">#!/bin/bash

tar -xzf jdk-8u121-linux-x64.tar.gz
export PATH=$(pwd)/jdk-8u121-linux-x64/bin:$PATH
export JAVA_HOME=$(pwd)/jdk-8u121-linux-x64
java -jar <i>program.jar</i></pre>
As in Step 2 above, the final line will vary, depending on your program.  </li>


</li></ol></p>



<div id = "copyright">
     <p align = "center"> 
	  
     For all user support, questions, and comments:
     <strong><a href="mailto:chtc@cs.wisc.edu">chtc@cs.wisc.edu</a></strong>

</p>
</div>

</div>

  </td>
  </tr>

</TABLE>
</td>
</table>

</body>
</html>


